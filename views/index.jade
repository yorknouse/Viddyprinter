extends layout

block content

  table#form
    thead
      tr
        th= "Name"
        th= "Time"
        th= "Where"
        th= "Points available"
        th= ""
        th= "Score"
        th= "Score"
        th= ""
    tbody
      each fixture in fixtures
        tr
          td
            input(
              type='text',
              id=fixture.id + '-name',
              value=fixture.name
              )
          td
            input(
              type='time',
              id=fixture.id + '-time',
              value=fixture.time
            )
          td
            input(
              type='text',
              id=fixture.id + '-location',
              value=fixture.location
            )
          td
            input(
              type='number',
              id=fixture.id + '-pointsAvailable',
              min='0',
              value=fixture.pointsAvailable
            )
          td
            input(
              type='text',
              id=fixture.id + '-home',
              placeholder='York',
              value=fixture.home
            )
          td
            input(
              type='number',
              id=fixture.id + '-homeScore',
              min='0',
              value=fixture.homeScore
            )
          td
            input(
              type='number',
              id=fixture.id + '-awayScore',
              min='0',
              value=fixture.awayScore
            )
          td
            input(
              type='text'
              id=fixture.id + '-away',
              placeholder='Durham',
              value=fixture.away
            )
  
  script(src="./socket.io/socket.io.js")
  script.
    
    socket = io.connect('http://data.nouse.co.uk:29024');

      var inputs = document.getElementById('form').getElementsByTagName('input');

      for (var i = 0; i < inputs.length; i++) {
        inputs[i].addEventListener('change', function(e) {
          socket.emit('edit', [ this.id, this.value ]);
        });
      }

    socket.on('update', function(data) {
      console.log(data);
      document.getElementById(data[0]).value = data[1];
    });
